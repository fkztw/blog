<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Just for noting - Firewall</title><link href="https://blog.fkz.tw/" rel="alternate"></link><link href="https://blog.fkz.tw/feeds/tag.firewall.atom.xml" rel="self"></link><id>https://blog.fkz.tw/</id><updated>2015-10-27T21:31:00+08:00</updated><subtitle></subtitle><entry><title>Network Administration Hw1: Setup DHCP, NAT, Firewall</title><link href="https://blog.fkz.tw/posts/2013/04/09/network-administration-hw1-setup-dhcp-nat-firewall/" rel="alternate"></link><published>2013-04-09T15:29:00+08:00</published><updated>2015-10-27T21:31:00+08:00</updated><author><name>fkz</name></author><id>tag:blog.fkz.tw,2013-04-09:/posts/2013/04/09/network-administration-hw1-setup-dhcp-nat-firewall/</id><summary type="html">&lt;p&gt;NCTUCS 2013 Spring Network Administration Homework1&lt;/p&gt;</summary><content type="html">&lt;h2&gt;Setup DHCP, NAT, Firewall&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;I done this homework in Arch Linux  &lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h2&gt;SPEC&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;Server - dhcp server, NAT, Firewall, ftp-proxy, transparent http proxy (TP)  &lt;/span&gt;
&lt;span class="err"&gt;(home-q) dhcp server =&amp;gt; dhcpd;  &lt;/span&gt;
&lt;span class="err"&gt;         NAT, Firewall, ftp-proxy =&amp;gt; iptables;  &lt;/span&gt;
&lt;span class="err"&gt;         transparent http proxy =&amp;gt; squid;  &lt;/span&gt;
&lt;span class="err"&gt;         外網網卡 enp0s18 140.113.27.37  &lt;/span&gt;
&lt;span class="err"&gt;         內網網卡 enp0s19 172.16.1.254  &lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;HostA -  dhcp client with private ip (172.16.1.101~172.16.1.200)  &lt;/span&gt;
&lt;span class="err"&gt;(www-q)  http client browse through Server&amp;#39;s TP  &lt;/span&gt;
&lt;span class="err"&gt;         dhcp client =&amp;gt; dhcpcd;  &lt;/span&gt;
&lt;span class="err"&gt;         內網網卡 enp0s18  &lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;HostB -  dhcp client with static private ip (172.16.1.30)  &lt;/span&gt;
&lt;span class="err"&gt;(mail-q) provide ssh service (bind on Server&amp;#39;s 222 port)  &lt;/span&gt;
&lt;span class="err"&gt;         provide ftp service (bind on Server&amp;#39;s 21 port)  &lt;/span&gt;
&lt;span class="err"&gt;         ftp service =&amp;gt; vsftpd;  &lt;/span&gt;
&lt;span class="err"&gt;         內網網卡 enp0s18; MAC 5a:49:97:32:c3:13 (拿來給 dhcpd 發 static private ip)  &lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;hr&gt;
&lt;h2&gt;DHCP server (on home-q)&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/Dhcpd"&gt;https://wiki.archlinux.org/index.php/Dhcpd&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="http://linux.vbird.org/linux_server/0340dhcp.php"&gt;http://linux.vbird.org/linux_server/0340dhcp.php&lt;/a&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;基本上就照著 Arch wiki 作&lt;br&gt;
&lt;code&gt;# ip addr add 172.16.1.254/24 dev enp0s19&lt;/code&gt;&lt;br&gt;
然後在 &lt;code&gt;/etc/dhcpd.conf&lt;/code&gt; 中寫下規則  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;option domain-name &amp;quot;nctucs.net&amp;quot;;                                                  &lt;/span&gt;
&lt;span class="err"&gt;option domain-name-servers 8.8.8.8, 140.113.1.1;                                  &lt;/span&gt;
&lt;span class="err"&gt;option subnet-mask 255.255.255.0;                                                  &lt;/span&gt;
&lt;span class="err"&gt;option routers 172.16.1.254;                                                      &lt;/span&gt;
&lt;span class="err"&gt;option broadcast-address 172.16.1.255;                                            &lt;/span&gt;
&lt;span class="err"&gt;                                                                                   &lt;/span&gt;
&lt;span class="err"&gt;default-lease-time 3600;                                                          &lt;/span&gt;
&lt;span class="err"&gt;max-lease-time 7200;                                                              &lt;/span&gt;
&lt;span class="err"&gt;ddns-update-style none;                                                            &lt;/span&gt;
&lt;span class="err"&gt;log-facility local7;                                                              &lt;/span&gt;
&lt;span class="err"&gt;                                                                                   &lt;/span&gt;
&lt;span class="err"&gt;#pool                                                                              &lt;/span&gt;
&lt;span class="err"&gt;subnet 172.16.1.0 netmask 255.255.255.0 {                                          &lt;/span&gt;
&lt;span class="err"&gt;    range 172.16.1.101 172.16.1.200;                                              &lt;/span&gt;
&lt;span class="err"&gt;}                                                                                  &lt;/span&gt;
&lt;span class="err"&gt;                                                                                   &lt;/span&gt;
&lt;span class="err"&gt;#static private ip                                                                &lt;/span&gt;
&lt;span class="err"&gt;host mail-q {                                                                      &lt;/span&gt;
&lt;span class="err"&gt;    hardware ethernet 5a:49:97:32:c3:13;                                          &lt;/span&gt;
&lt;span class="err"&gt;    fixed-address 172.16.1.30;                                                    &lt;/span&gt;
&lt;span class="err"&gt;}  &lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;為了讓 dhcpd 只 listen 特定的 interface&lt;br&gt;
在 &lt;code&gt;/etc/conf.d/dhcp&lt;/code&gt; 中 把 &lt;code&gt;DHCP4_ARGS="-q"&lt;/code&gt; 改成 &lt;code&gt;DHCP4_ARGS="-q enp0s19"&lt;/code&gt;&lt;br&gt;
然後 &lt;code&gt;# systemctl start dhcpd4&lt;/code&gt; 應該就能成功當起 dhcp server 了  &lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;DHCP client (on www-q and mail-q)&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/Network_Configuration#Dynamic_IP_address"&gt;https://wiki.archlinux.org/index.php/Network_Configuration#Dynamic_IP_address&lt;/a&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;一樣照著 arch wiki 作 預設應該就有裝 dhcpcd 了&lt;br&gt;
&lt;code&gt;# dhcpcd enp0s18&lt;/code&gt;&lt;br&gt;
這裡的 enp0s18 是內網網卡&lt;br&gt;
然後 &lt;code&gt;# systemctl start dhcpcd@enp0s18&lt;/code&gt;&lt;br&gt;
用 &lt;code&gt;$ lspci -k&lt;/code&gt; 察看跟網卡相關的 modules&lt;br&gt;
結果如下  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="mi"&gt;00&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mf"&gt;13.0&lt;/span&gt; &lt;span class="n"&gt;Ethernet&lt;/span&gt; &lt;span class="n"&gt;controller&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Realtek&lt;/span&gt; &lt;span class="n"&gt;Semiconductor&lt;/span&gt; &lt;span class="n"&gt;Co&lt;/span&gt;&lt;span class="o"&gt;.,&lt;/span&gt; &lt;span class="n"&gt;Ltd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt; &lt;span class="n"&gt;RTL&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;8139&lt;/span&gt;&lt;span class="sr"&gt;/8139C/&lt;/span&gt;&lt;span class="mi"&gt;8139&lt;/span&gt;&lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rev&lt;/span&gt; &lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;  
&lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="n"&gt;Subsystem&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Red&lt;/span&gt; &lt;span class="n"&gt;Hat&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Inc&lt;/span&gt; &lt;span class="n"&gt;Device&lt;/span&gt; &lt;span class="mi"&gt;1100&lt;/span&gt;  
&lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="err"&gt; &lt;/span&gt; &lt;span class="n"&gt;Kernel&lt;/span&gt; &lt;span class="n"&gt;driver&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="n"&gt;use&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;8139&lt;/span&gt;&lt;span class="n"&gt;cp&lt;/span&gt;  
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;所以可以知道在 &lt;code&gt;/etc/modules-load/realtek.conf&lt;/code&gt;  &lt;/p&gt;
&lt;h3&gt;Note&lt;/h3&gt;
&lt;p&gt;這邊卡關了一下是因為 dv 也在 140.113.27 網段底下架了一台 dhcp Server&lt;br&gt;
結果我的 client 一直拿到他的 server 發出來的 ip 而不是我自己架的&lt;br&gt;
看了鳥哥的網頁&lt;br&gt;
&lt;a href="http://linux.vbird.org/linux_server/0340dhcp.php#client_linux"&gt;http://linux.vbird.org/linux_server/0340dhcp.php#client_linux&lt;/a&gt;&lt;br&gt;
裏面有提到在 client 端上的 /var/lib/dhclient/ 裏面有跟租約相關的檔案&lt;br&gt;
可以用 vim 開啟直接改寫&lt;br&gt;
&lt;code&gt;option dhcp-server-identifier 172.16.1.254&lt;/code&gt; 指定 dhcp Server&lt;br&gt;
可是在 archlinux 底下無法直接這樣改寫，用vim開起來會是亂碼&lt;br&gt;
後來是在 client 端的 &lt;code&gt;/etc/dhcpcd.conf&lt;/code&gt; 中加上 &lt;code&gt;static routers=172.16.1.254&lt;/code&gt; 解決  &lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;NAT &amp;amp; Firewall&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;In Linux we use iptables, while in FreeBSD we use PF  &lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://linux.vbird.org/linux_server/0250simple_firewall.php"&gt;http://linux.vbird.org/linux_server/0250simple_firewall.php&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/Internet_Share"&gt;https://wiki.archlinux.org/index.php/Internet_Share&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/Simple_Stateful_Firewall"&gt;https://wiki.archlinux.org/index.php/Simple_Stateful_Firewall&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/Iptables"&gt;https://wiki.archlinux.org/index.php/Iptables&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/Router"&gt;https://wiki.archlinux.org/index.php/Router&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.revsys.com/writings/quicktips/nat.html"&gt;http://www.revsys.com/writings/quicktips/nat.html&lt;/a&gt;&lt;br&gt;
&lt;br&gt;
參考了以上的連結之後，目前 iptables 的設定如下  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;# Generated by iptables-save v1.4.18 on Tue Apr  9 04:40:40 2013                &lt;/span&gt;
&lt;span class="err"&gt;*mangle                                                                        &lt;/span&gt;
&lt;span class="err"&gt;:PREROUTING ACCEPT [369:34165]                                                  &lt;/span&gt;
&lt;span class="err"&gt;:INPUT ACCEPT [278:20862]                                                      &lt;/span&gt;
&lt;span class="err"&gt;:FORWARD ACCEPT [91:13303]                                                      &lt;/span&gt;
&lt;span class="err"&gt;:OUTPUT ACCEPT [153:20248]                                                      &lt;/span&gt;
&lt;span class="err"&gt;:POSTROUTING ACCEPT [244:33551]                                                &lt;/span&gt;
&lt;span class="err"&gt;COMMIT                                                                          &lt;/span&gt;
&lt;span class="err"&gt;# Completed on Tue Apr  9 04:40:40 2013                                        &lt;/span&gt;
&lt;span class="err"&gt;# Generated by iptables-save v1.4.18 on Tue Apr  9 04:40:40 2013                &lt;/span&gt;
&lt;span class="err"&gt;*filter                                                                        &lt;/span&gt;
&lt;span class="err"&gt;:INPUT ACCEPT [3:418]                                                          &lt;/span&gt;
&lt;span class="err"&gt;:FORWARD ACCEPT [91:13303]                                                      &lt;/span&gt;
&lt;span class="err"&gt;:OUTPUT ACCEPT [153:20248]                                                      &lt;/span&gt;
&lt;span class="err"&gt;:BADHOST - [0:0]                                                                &lt;/span&gt;
&lt;span class="err"&gt;-A INPUT -j BADHOST                                                            &lt;/span&gt;
&lt;span class="err"&gt;-A BADHOST -s 140.113.101.10 -j DROP                                            &lt;/span&gt;
&lt;span class="err"&gt;-A INPUT -i enp0s18 -p icmp -m icmp --icmp-type 8 -j DROP                      &lt;/span&gt;
&lt;span class="err"&gt;-A INPUT -m state --state INVALID -j DROP                                      &lt;/span&gt;
&lt;span class="err"&gt;-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT                        &lt;/span&gt;
&lt;span class="err"&gt;-A INPUT -i lo -j ACCEPT                                                        &lt;/span&gt;
&lt;span class="err"&gt;-A INPUT -i enp0s18 -s 140.113.230.88 -j ACCEPT                                &lt;/span&gt;
&lt;span class="err"&gt;-A FORWARD -m state --state INVALID -j DROP                                    &lt;/span&gt;
&lt;span class="err"&gt;-A FORWARD -s 140.113.17.0/24 -d 172.16.1.30 -p tcp --dport 21 -j REJECT --reject-with tcp-reset  &lt;/span&gt;
&lt;span class="err"&gt;-A FORWARD -m state --state RELATED,ESTABLISHED -j ACCEPT  &lt;/span&gt;
&lt;span class="err"&gt;-A FORWARD -s 140.113.230.88 -d 172.16.1.30 -p tcp --dport 21:22 -j ACCEPT      &lt;/span&gt;
&lt;span class="err"&gt;-A FORWARD -s 140.113.27.47 -d 172.16.1.30 -p tcp --dport 22 -j ACCEPT        &lt;/span&gt;
&lt;span class="err"&gt;-A FORWARD -s 140.113.235.0/24 -d 172.16.1.30 -p tcp --dport 21 -j ACCEPT      &lt;/span&gt;
&lt;span class="err"&gt;-A FORWARD -s 140.113.17.0/24 -d 172.16.1.30 -p tcp --dport 22 -j ACCEPT        &lt;/span&gt;
&lt;span class="err"&gt;-A FORWARD -d 172.16.1.30 -p tcp --dport 21 -j DROP                            &lt;/span&gt;
&lt;span class="err"&gt;-A FORWARD -d 172.16.1.30 -p tcp --dport 22 -j DROP                            &lt;/span&gt;
&lt;span class="err"&gt;COMMIT                                                                          &lt;/span&gt;
&lt;span class="err"&gt;# Completed on Tue Apr  9 04:40:40 2013                                        &lt;/span&gt;
&lt;span class="err"&gt;# Generated by iptables-save v1.4.18 on Tue Apr  9 04:40:40 2013                &lt;/span&gt;
&lt;span class="err"&gt;*nat                                                                            &lt;/span&gt;
&lt;span class="err"&gt;:PREROUTING ACCEPT [2:426]                                                      &lt;/span&gt;
&lt;span class="err"&gt;:INPUT ACCEPT [1:354]                                                          &lt;/span&gt;
&lt;span class="err"&gt;:OUTPUT ACCEPT [0:0]                                                            &lt;/span&gt;
&lt;span class="err"&gt;:POSTROUTING ACCEPT [1:60]                                                      &lt;/span&gt;
&lt;span class="err"&gt;-A PREROUTING -i enp0s18 -p tcp --dport 21 -j DNAT --to-destination 172.16.1.30:21  &lt;/span&gt;
&lt;span class="err"&gt;-A PREROUTING -i enp0s18 -p tcp --dport 222 -j DNAT --to-destination 172.16.1.30:22  &lt;/span&gt;
&lt;span class="err"&gt;-A PREROUTING -s 172.16.1.0/24 -i enp0s19 -p tcp -m tcp --dport 80 -j REDIRECT --to-ports 3128  &lt;/span&gt;
&lt;span class="err"&gt;-A POSTROUTING -s 172.16.1.0/24 -o enp0s18 -j MASQUERADE                        &lt;/span&gt;
&lt;span class="err"&gt;COMMIT                                                                          &lt;/span&gt;
&lt;span class="err"&gt;# Completed on Tue Apr  9 04:40:40 2013  &lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;140.113.230.88 是寢室的 ip&lt;br&gt;
140.113.27.47 是社窩無網的ip&lt;br&gt;
為了方便操作用  &lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h2&gt;Proxy&lt;/h2&gt;
&lt;h3&gt;ftp-proxy&lt;/h3&gt;
&lt;p&gt;好像在 iptables 就設定完了 根本不用像 FreeBSD 還要用 ftp-proxy&lt;br&gt;
猜測是因為 &lt;code&gt;-A FORWARD -m state --state RELATED,ESTABLISHED -j ACCEPT&lt;/code&gt; 的緣故  &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://wiki.archlinux.org/index.php/Squid"&gt;https://wiki.archlinux.org/index.php/Squid&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;a href="http://linux.vbird.org/linux_server/0420squid.php"&gt;http://linux.vbird.org/linux_server/0420squid.php&lt;/a&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;transparent http proxy&lt;/h3&gt;
&lt;p&gt;在 &lt;code&gt;/etc/squid/squid.conf&lt;/code&gt; 中 &lt;code&gt;http_port&lt;/code&gt; 後面加上 &lt;code&gt;intercept&lt;/code&gt;  &lt;/p&gt;
&lt;p&gt;&lt;code&gt;http_port 3128 intercept&lt;/code&gt;  &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;鳥哥裏面是寫 &lt;code&gt;http_port 3128 transparent&lt;/code&gt;&lt;br&gt;
在 &lt;a href="http://www.squid-cache.org/Doc/config/http_port/"&gt;http://www.squid-cache.org/Doc/config/http_port/&lt;/a&gt; 有寫到在 3.1 的版本以後&lt;br&gt;
intercept - Rename of old 'transparent' option to indicate proper functionality.  &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;把 &lt;code&gt;cache_dir ufs /var/cache/squid 256 16 256&lt;/code&gt; 的註解取消&lt;br&gt;
再加上 &lt;code&gt;cache_mem 8 MB&lt;/code&gt; (預設是 8 MB 可以自己改)  &lt;/p&gt;
&lt;p&gt;&lt;code&gt;# squid -z&lt;/code&gt; (在 &lt;code&gt;/var/cache/squid/&lt;/code&gt; 建立資料夾)&lt;br&gt;
&lt;code&gt;# squid -k check&lt;/code&gt; (檢查 &lt;code&gt;/etc/squid/squid.conf&lt;/code&gt; 有沒有問題)&lt;br&gt;
&lt;code&gt;# systemctl start squid&lt;/code&gt;  &lt;/p&gt;
&lt;p&gt;之後在 iptables 的 nat table 中加上新的 rule,&lt;br&gt;
把內網往外傳的 http request 轉到 squid 上&lt;br&gt;
&lt;code&gt;-A PREROUTING -i enp0s19 -s 172.16.1.0/24 -p tcp --dport 80 -j REDIRECT --to-ports 3128&lt;/code&gt;&lt;br&gt;
然後 reload iptables  &lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;vsftpd&lt;/h2&gt;
&lt;p&gt;遇到兩個錯誤  &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;500 OOPS: priv_sock_get_cmd&lt;/code&gt;  &lt;ul&gt;
&lt;li&gt;解決方法  &lt;ul&gt;
&lt;li&gt;&lt;a href="https://bbs.archlinux.org/viewtopic.php?id=147074"&gt;https://bbs.archlinux.org/viewtopic.php?id=147074&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;在 &lt;code&gt;/etc/vsftpd.conf&lt;/code&gt; 加上 &lt;code&gt;seccomp_sandbox=0&lt;/code&gt;  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;500 OOPS: vsftpd: refusing to run with writable root inside chroot()&lt;/code&gt;  &lt;ul&gt;
&lt;li&gt;解決方法  &lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.ubuntu-tw.org/modules/newbb/viewtopic.php?post_id=236642"&gt;http://www.ubuntu-tw.org/modules/newbb/viewtopic.php?post_id=236642&lt;/a&gt;  &lt;/li&gt;
&lt;li&gt;&lt;code&gt;chmod a-w $dir&lt;/code&gt;  &lt;/li&gt;
&lt;li&gt;該 root dir 不可有寫入的權限  &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h2&gt;感想&lt;/h2&gt;
&lt;p&gt;用 Arch Linux 蠻方便的&lt;br&gt;
基本上就照著鳥哥和 Arch Wiki 的教學邊做邊學應該就差不多了&lt;br&gt;
不過跟上課教的好像差蠻多的XD&lt;br&gt;
教的是 FreeBSD, PF&lt;br&gt;
結果我用 Linux, iptables&lt;br&gt;
這樣期中考真的沒問題嗎w?  &lt;/p&gt;</content><category term="Linux"></category><category term="Arch Linux"></category><category term="iptables"></category><category term="Firewall"></category><category term="DHCP"></category><category term="NAT"></category><category term="sysadmin"></category></entry></feed>